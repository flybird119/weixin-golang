syntax = "proto3";

package pb;

import "pb/common.proto";

enum MediaZone {
    Test      = 0;
    Public    = 1;
}

service Mediastore {
    rpc FetchImage (FetchImageReq) returns (FetchImageResp);
    rpc GetUpToken (UpLoadReq) returns (GetUpTokenResp);
    rpc RefreshUrls (RefreshReq) returns (NormalResp);
}

message RefreshReq {
    repeated string urls = 1;
}

message UpLoadReq {
    MediaZone zone = 1;
    string key = 2;
}
message GetUpTokenResp {
    string token = 1;
    string url = 2;
}

message FetchImageReq {
    MediaZone zone = 1;
    string url = 2;
    string key = 3;
}

message FetchImageResp {
    string qiniu_url = 1;
}
