syntax = "proto3";

package pb;

import "pb/common.proto";

service OrderService {
    //æäº¤è®¢å•
    rpc OrderSubmit (OrderSubmitModel) returns (OrderSubmitResp);
    //è®¢å•æ”¯ä»˜å®Œæˆ -->å¾…å‘è´§
    rpc PaySuccess (Order) returns (NormalResp);
    //è®¢å•å‘è´§
    rpc DeliverOrder (Order) returns (NormalResp);
    //è®¢å•é…é€
    rpc DistributeOrder (Order) returns (NormalResp);
    //ç¡®è®¤è®¢å•ï¼ˆå¾®ä¿¡ç«¯ï¼‰ğŸ˜³
    rpc ConfirmOrder (Order) returns (NormalResp);
    //ç”³è¯·å”®åï¼ˆå¾®ä¿¡ç«¯ï¼‰ğŸ˜³
    rpc AfterSaleApply (Order) returns (NormalResp);
    //æ‰“å°è®¢å•
    rpc PrintOrder (Order) returns (NormalResp);
    //è·å–è®¢å•è¯¦æƒ…
    rpc OrderDetail (Order) returns (OrderDetailResp);
    //è·å–è®¢å•åˆ—è¡¨ ç”¨æˆ· äº‘åº—é“º çŠ¶æ€
    rpc OrderList (Order) returns (OrderListResp);
    //å…³é—­è®¢å•
    rpc CloseOrder (Order) returns (Void);
}

//è®¢å•model
message Order{
    string id = 1;
    int64 order_status = 2;
    int64 total_fee = 3;
    int64 freight  = 4;
    int64 goods_fee = 5;
    int64 withdrawal_fee = 6;
    string user_id = 7;
    string mobile = 8;
    string name = 9;
    string address = 10;
    string remark = 11;
    string store_id = 12;
    string school_id = 13;
    string trade_no = 14;
    int64 order_at = 15;
    int64 pay_at = 16;
    int64 deliver_at = 17;
    int64 print_at =18;
    int64 complete_at = 19;
    string print_staff_id   = 20;
    string deliver_staff_id = 21;
    int64 after_sale_status = 22;
    string after_sale_trade_no = 23;
    int64 refund_fee = 24;
    int64 update_at = 25;
    string pay_channel = 26;
    string after_sale_staff_id = 27;
    int64 after_sale_apply_at = 28;
    int64 after_sale_end_at = 29;
    string groupon_id = 30;
    int64 searchType = 31; //æœç´¢ç±»å‹ 0 ç”¨æˆ·æœç´¢ 1å•†å®¶æœç´¢
    int64 start_at = 32;
    int64 end_at = 33;
    int64 page = 34;
    int64 size = 35;
    string isbn = 36;
    int64 comfirm_at = 37;
    int64 distribute_at = 38;
    int64 distribute_staff_id = 39;
}

//è®¢å•è¯¦æƒ…model
message OrderDetail{
    Order order = 1;
    repeated OrderItem items = 2;
}
//è®¢å•è¯¦æƒ…åˆ—è¡¨
message OrderDetailResp{
    string code = 1;
    string message = 2;
    OrderDetail data = 3;
}
message OrderListResp{
    string code =1;
    string message =2;
    repeated OrderDetail data = 3;
}
//è®¢å•æäº¤model
message OrderSubmitModel{
    string user_id = 1;
    string store_id = 2;
    string mobile = 3;
    string name = 4;
    string address = 5;
    string remark = 6;
    string school_id = 7;
    repeated string cart_ids = 8;
}
message OrderSubmitResp{
    string code = 1;
    string message =2;
    Order data = 3;
}
//è®¢å•é¡¹
message OrderItem{
    string id = 1;
    string goods_id = 2;
    int64 type = 3;
    int64 amount = 4;
    int64 price = 5;
    string book_image = 6;
    string book_isbn = 7;
    string book_title = 8;
}
